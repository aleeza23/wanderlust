<% layout("/layouts/boilerplate.ejs") %>

    <body>
        <div class="container  ">
            <div class="filter pt-4">
                <button class="prev-btn"><i class="fa-solid fa-chevron-left"></i></button>
                <div class="scroll-container">
                    <div class="scroll-row">
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Trending" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-fire"></i></div>
                                <p>Trending</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Rooms" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-bed"></i></div>
                                <p>Rooms</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Iconic Center" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-mountain-city"></i></i></div>
                                <p>Iconic Center</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="mountains" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-mountain"></i></i></div>
                                <p>mountains</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="castles" class="category-btn">
                                <div class="icon"><i class="fa-brands fa-fort-awesome"></i></div>
                                <p>castles</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Amazing pools" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-person-swimming"></i></div>
                                <p>Amazing pools</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Camping" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-mountain-sun"></i></i></div>
                                <p>Camping</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="farms" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-cow"></i></div>
                                <p>farms</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Arctic" class="category-btn">
                                <div class="icon"><i class="fa-brands fa-galactic-republic"></i></div>
                                <p>Arctic</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Domes" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-igloo"></i></div>
                                <p>Domes</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Boats" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-sailboat"></i></div>
                                <p>Boats</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Creative Spaces" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-palette"></i></div>
                                <p>Creative Spaces</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Golfing" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-golf-ball-tee"></i></div>
                                <p>Golfing</p>
                            </button>
                        </form>
                        <form method="get" class="trending filter-box" action="/listings">
                            <button name="category" value="Beach" class="category-btn">
                                <div class="icon"><i class="fa-solid fa-umbrella-beach"></i></div>
                                <p>Beach</p>
                            </button>
                        </form>
                    </div>
                </div>
                <button class="next-btn"><i class="fa-solid fa-chevron-right"></i></button>
                <div class="tax-switch">
                    <div class="form-check-reverse form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                        <label class="form-check-label" for="flexSwitchCheckDefault">Display total after taxes</label>
                    </div>
                </div>
            </div>
            <div class="row  mt-5 row-cols-lg-4 row-cols-md-2 row-cols-sm-1">

                <% for (let listing of response) { %>
                    <a class="listing-link" href="/listings/<%= listing._id %>">
                        <div class="card col listing-card">
                            <img src="<%= listing.image.url %>" class="card-img-top" alt="..." style="height: 20rem;">

                            <div class="card-img-overlay"> </div>

                            <div class="card-body">
                                <p class="card-text">
                                    <b>
                                        <%= listing.title %>
                                    </b>
                                    <br>
                                    Rs.<%= listing.price.toLocaleString("en-PK") %>
                                    <i class="tax-info"> &nbsp; &nbsp;+18% GST</i>
                                </p>
                            </div>
                        </div>
                    </a>
                    <% } %>
            </div>
        </div>

        <script>
            //Scrolling Js
            document.addEventListener("DOMContentLoaded", function () {
                const scrollContainer = document.querySelector('.scroll-container');
                const scrollRow = document.querySelector('.scroll-row');
                const prevBtn = document.querySelector('.prev-btn');
                const nextBtn = document.querySelector('.next-btn');

                prevBtn.addEventListener('click', function () {
                    scrollContainer.scrollLeft -= 200; // Adjust as needed
                });

                nextBtn.addEventListener('click', function () {
                    scrollContainer.scrollLeft += 200; // Adjust as needed
                });
            });

            //Tax-swich
            let btn = document.querySelector('#flexSwitchCheckDefault');
            btn.addEventListener('click', () => {
                let taxInfo = document.querySelectorAll('.tax-info');
                for (tax of taxInfo) {
                    if (tax.style.display != "inline") {
                        tax.style.display = 'inline';
                    }
                    else {
                        tax.style.display = 'none';
                    }
                }
            });

        </script>
    </body>